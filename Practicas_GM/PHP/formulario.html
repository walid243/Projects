<!DOCTYPE html>
<html lang="es" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/jquery-form/form@4.3.0/dist/jquery.form.min.js" integrity="sha384-qlmct0AOBiA2VPZkMY3+2WqkHtIQ9lSdAsAn5RUJD/3vA5MKDgSGcdmIv4ycVxyn" crossorigin="anonymous"></script>
    <!-- <script src="check_datos.js"></script> -->

  </head>
  <body>
    <!-- Button trigger modal -->
  <button type="button" class="btn btn-primary" style="margin:10rem 40rem;" data-toggle="modal" data-target="#staticBackdrop">
    Registrarse
  </button>

  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" style="height: 100%" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="background-color: #cccccc;">
          <h5 class="modal-title"  id="staticBackdropLabel">Formulario de registro</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="background-color: #f2f2f2">
       <form id="form_registro" method="post" action="Formulario.php">
         <div class="form-group row">
           <label for="dni" class="col-3 col-form-label">DNI/NIE</label>
           <div class="col-9">
             <div class="input-group">
               <div class="input-group-prepend">
                 <div class="input-group-text">
                   <i class="fa fa-address-card"></i>
                 </div>
               </div>
               <input autocomplete="off" id="dni" name="dni" maxlength="9" onblur="check_id()" placeholder="12345678a" type="text" required="required" class="form-control">
               <!--<div class="input-group-append">
                 <button type="button" method="get" class="input-group-text">
                   <i class="fa fa-check-circle"></i>
                 </button>
               </div>-->
             </div>
           </div>
         </div>
         <div class="form-group row">
           <label for="password" class="col-3 col-form-label">Contraseña</label>
           <div class=" input-group col-9">
             <input id="password" name="password" maxlength="16" placeholder="ej: P@ssW0rd" type="password" required="required" class="form-control">
             <!-- <div class=""> -->
               <button type="button" onclick="mostrarcont()" class="input-group-btn col-2 form-control">
                 <i  id="ojo" class="fa fa-eye-slash"></i>
               </button>
             <!-- </div> -->
             </div>
         </div>
         <div class="form-group row">
           <label for="nombre" class="col-3 col-form-label">Nombre</label>
           <div class="col-9">
             <input id="nombre" name="nombre" minlength="3" placeholder="Luis" type="text" required="required" class="form-control">
           </div>
         </div>
         <div class="form-group row">
           <label for="apellido1" class="col-3 col-form-label">Apellido</label>
           <div class="col-9">
             <input id="apellido1" name="apellido1" minlength="3" placeholder="Garcia" type="text" required="required" class="form-control">
           </div>
         </div>
         <div class="form-group row">
           <label for="apellido2" class="col-3 col-form-label">Apellido 2</label>
           <div class="col-9">
             <input id="apellido2" name="apellido2" minlength="3" placeholder="Cadaveira" type="text" class="form-control">
           </div>
         </div>
         <div class="form-group row">
           <label class="col-3">Sexo</label>
           <div class="col-9">
             <div class="custom-control custom-radio custom-control-inline">
               <input name="Sexo" id="Sexo_0" type="radio" required="required" class="custom-control-input" value="masculino">
               <label for="Sexo_0" class="custom-control-label">Masculino</label>
             </div>
             <div class="custom-control custom-radio custom-control-inline">
               <input name="Sexo" id="Sexo_1" type="radio" required="required" class="custom-control-input" value="femenino">
               <label for="Sexo_1" class="custom-control-label">Femenino</label>
             </div>
             <div class="custom-control custom-radio custom-control-inline">
               <input name="Sexo" id="Sexo_2" type="radio" required="required" class="custom-control-input" value="otro">
               <label for="Sexo_2" class="custom-control-label">otro</label>
             </div>
           </div>
         </div>
         <div class="form-group row">
           <label for="movil" class="col-3 col-form-label">movil</label>
           <div class="col-9">
             <input id="movil" name="movil" placeholder="654234756" type="text" pattern="(^[6]{1}[0-9]{8}$)" title="numero de telefono" maxlength="9" class="form-control" required="required">
           </div>
         </div>
         <div class="form-group row">
           <label for="email" class="col-3 col-form-label">Correo electronico</label>
           <div class="col-9">
             <input id="email" name="email" placeholder="luisgc@email.com" type="email" required="required" class="form-control">
           </div>
         </div>
         <div class="form-group row">
           <label for="direccion" class="col-3 col-form-label">Dirección</label>
           <div class="col-9">
             <input id="direccion" name="direccion" placeholder="Calle Castelao 19 1ºA" type="text" required="required" class="form-control">
           </div>
         </div>
         <div class="form-group row">
           <label for="codigopostal" class="col-3 col-form-label">Codigo postal</label>
           <div class="col-9">
             <input id="codigopostal" name="codigopostal" maxlength="5" placeholder="82366" type="text" class="form-control" required="required">
           </div>
         </div>
         <div class="form-group row">
           <div class="offset-3 col-9">
             <button name="submit" type="submit" class="btn btn-primary">Enviar</button>
           </div>
         </div>
       </form>
     </div>
      <div class="modal-footer" style="background-color: #cccccc;">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

      </div>
    </div>
  </div>
</div>
<script>
function check_id(){
  var patron_dni = /^[0-9]{8}[a-zA-z]$/;
  var patron_nie = /^[x-zX-Z][0-9]{7}[a-zA-Z]$/;
  var dato = document.getElementById('dni').value;
  console.log(dato);
  var letras = ["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"]
  document.getElementById('dni').className = "form-control";
                          // Parte del DNI
  if (patron_dni.test(dato)) {
    var numero = dato.substring(0,8) % 23;
    var letra = dato.substring(8, 9).toUpperCase();
    if (letra == letras[numero]) {
      document.getElementById('dni').className += " border border-success";
    } else {
      document.getElementById('dni').className += " border border-danger";
      return false;

    }
  } else {
                          // Parte del NIE
    var letra_ini = dato.substring(0, 1).toUpperCase();
    var numero = dato.substring(1, 8);
    var letra_fin = dato.substring(8, 9).toUpperCase();
    var val_letra = {X: 0, Y: 1, Z: 2};

    numero = (val_letra[letra_ini] + numero) % 23;

    if (letra_fin == letras[numero]) {
      document.getElementById('dni').className += " border border-success";
    } else {
      document.getElementById('dni').className += " border border-danger";
      return false;

    }
  }
}
  function mostrarcont(){
    var tipo = document.getElementById('password');
    var ojo = document.getElementById('ojo');
    if ( tipo.type == "password") {
      tipo.type = "text";
      ojo.className = "fa fa-eye";
    } else {
      tipo.type = "password";
      ojo.className = "fa fa-eye-slash";

    }

  }
</script>
  </body>
</html>
